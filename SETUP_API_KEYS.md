# üîë –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API –∫–ª—é—á–µ–π - Business Planner

> **–ë—ã—Å—Ç—Ä—ã–π –≥–∞–π–¥ –ø–æ –ø–æ–ª—É—á–µ–Ω–∏—é Telegram Bot Token –∏ OpenAI API Key**

---

## 1Ô∏è‚É£ Telegram Bot Token

### –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather

1. **–û—Ç–∫—Ä—ã—Ç—å Telegram**, –Ω–∞–π—Ç–∏ **@BotFather**
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É: `/newbot`
3. –í–≤–µ—Å—Ç–∏ –∏–º—è –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `Business Planner Bot`)
4. –í–≤–µ—Å—Ç–∏ username –±–æ—Ç–∞ (–¥–æ–ª–∂–µ–Ω –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ `bot`, –Ω–∞–ø—Ä–∏–º–µ—Ä: `business_planner_bot`)

### –®–∞–≥ 2: –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è @BotFather –ø—Ä–∏—à–ª—ë—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ:
```
Done! Congratulations on your new bot...

Use this token to access the HTTP API:
1234567890:ABCdefGHIjklMNOpqrsTUVwxyz

Keep your token secure and store it safely...
```

**–≠—Ç–æ –∏ –µ—Å—Ç—å –≤–∞—à `TELEGRAM_BOT_TOKEN`** ‚úÖ

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±–æ—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```
/setdescription - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ
/setabouttext - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å "–û –±–æ—Ç–µ"
/setuserpic - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞–≤–∞—Ç–∞—Ä
```

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ:
```
ü§ñ AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á–∞–º–∏
–û—Ç–ø—Ä–∞–≤—å—Ç–µ –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Äî —è —Å–æ–∑–¥–∞–º –∑–∞–¥–∞—á—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!
```

---

## 2Ô∏è‚É£ OpenAI API Key

### –®–∞–≥ 1: –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ OpenAI

1. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞: https://platform.openai.com/
2. –ù–∞–∂–∞—Ç—å **Sign Up** (–∏–ª–∏ **Log In** –µ—Å–ª–∏ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç)
3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å email

### –®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã

1. –ü–µ—Ä–µ–π—Ç–∏ –≤ **Settings** ‚Üí **Billing**
2. –ù–∞–∂–∞—Ç—å **Add payment method**
3. –í–≤–µ—Å—Ç–∏ –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –ë–µ–∑ –∫–∞—Ä—Ç—ã API –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å (–¥–∞–∂–µ –≤ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º tier)

### –®–∞–≥ 3: –°–æ–∑–¥–∞—Ç—å API Key

1. –ü–µ—Ä–µ–π—Ç–∏ –≤ **API Keys**: https://platform.openai.com/api-keys
2. –ù–∞–∂–∞—Ç—å **Create new secret key**
3. –î–∞—Ç—å –∏–º—è (–Ω–∞–ø—Ä–∏–º–µ—Ä: `Business Planner`)
4. **–°–†–ê–ó–£ –°–ö–û–ü–ò–†–û–í–ê–¢–¨ –ö–õ–Æ–ß** (–±–æ–ª—å—à–µ –Ω–µ –ø–æ–∫–∞–∂–µ—Ç—Å—è!)

–§–æ—Ä–º–∞—Ç –∫–ª—é—á–∞:
```
sk-proj-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

**–≠—Ç–æ –≤–∞—à `OPENAI_API_KEY`** ‚úÖ

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–∏–º–∏—Ç—ã

1. –ü–µ—Ä–µ–π—Ç–∏ –≤ **Usage**: https://platform.openai.com/usage
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å **Usage limits** (–Ω–∞–ø—Ä–∏–º–µ—Ä, $10/–º–µ—Å—è—Ü)
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

---

## 3Ô∏è‚É£ –°–æ–∑–¥–∞—Ç—å .env —Ñ–∞–π–ª

### –í–∞—Ä–∏–∞–Ω—Ç A: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# Windows PowerShell
Copy-Item .env.example .env

# Linux/Mac
cp .env.example .env
```

### –í–∞—Ä–∏–∞–Ω—Ç B: –í—Ä—É—á–Ω—É—é

–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
# ============================================================================
# Business Planner - Environment Variables
# ============================================================================

# ============================================================================
# Application Settings
# ============================================================================
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=INFO

API_HOST=0.0.0.0
API_PORT=8000

# ============================================================================
# OpenAI Configuration
# ============================================================================
OPENAI_API_KEY=sk-proj-–≤–∞—à_–∫–ª—é—á_—Å—é–¥–∞

# Model Selection
MODEL_PARSER=gpt-4o-mini
MODEL_REASONING=gpt-4o-mini
MODEL_ANALYTICS=gpt-4o
MODEL_VOICE=whisper-1
MODEL_EMBEDDINGS=text-embedding-3-small

# ============================================================================
# Telegram Bot
# ============================================================================
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_SECRET_TOKEN=random_secret_string_123456
TELEGRAM_WEBHOOK_URL=
TELEGRAM_USE_WEBHOOK=false

# ============================================================================
# Database - PostgreSQL
# ============================================================================
DATABASE_URL=postgresql+asyncpg://planner:planner123@localhost:5432/planner

# ============================================================================
# Redis - Cache
# ============================================================================
REDIS_URL=redis://localhost:6379/0

# ============================================================================
# RAG Configuration
# ============================================================================
EMBEDDING_DIMENSION=1536
SIMILARITY_THRESHOLD=0.7
RAG_TOP_K=5

# ============================================================================
# Business Rules
# ============================================================================
DEFAULT_DEADLINE_DAYS=7
WORKDAY_START_HOUR=9
WORKDAY_END_HOUR=18
TIMEZONE=Asia/Almaty

TIME_MORNING=09:00
TIME_AFTERNOON=13:00
TIME_EVENING=18:00

# ============================================================================
# Rate Limiting
# ============================================================================
RATE_LIMIT_PER_MINUTE=30
RATE_LIMIT_PER_HOUR=500
```

---

## 4Ô∏è‚É£ –ó–∞–ø–æ–ª–Ω–∏—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è

### –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ:

```env
# ‚úÖ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û - Telegram
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_BotFather

# ‚úÖ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û - OpenAI  
OPENAI_API_KEY=sk-proj-–≤–∞—à_–∫–ª—é—á

# ‚úÖ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û - Database (–µ—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ –ª–æ–∫–∞–ª—å–Ω–æ)
DATABASE_URL=postgresql+asyncpg://planner:planner123@localhost:5432/planner
```

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞):

```env
TELEGRAM_SECRET_TOKEN=—Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å_—Å–ª—É—á–∞–π–Ω—É—é_—Å—Ç—Ä–æ–∫—É
TELEGRAM_WEBHOOK_URL=https://yourdomain.com/webhook/telegram
TELEGRAM_USE_WEBHOOK=true
```

---

## 5Ô∏è‚É£ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å SECRET_TOKEN

–î–ª—è webhook –≤ production –Ω—É–∂–µ–Ω —Å–ª—É—á–∞–π–Ω—ã–π —Ç–æ–∫–µ–Ω:

### PowerShell:
```powershell
-join ((65..90) + (97..122) + (48..57) | Get-Random -Count 32 | ForEach-Object {[char]$_})
```

### Python:
```python
import secrets
print(secrets.token_urlsafe(32))
```

### Linux:
```bash
openssl rand -hex 32
```

–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—Å—Ç–∞–≤–∏—Ç—å –≤ `.env`:
```env
TELEGRAM_SECRET_TOKEN=–ø–æ–ª—É—á–µ–Ω–Ω–∞—è_—Å–ª—É—á–∞–π–Ω–∞—è_—Å—Ç—Ä–æ–∫–∞
```

---

## 6Ô∏è‚É£ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ‚ö†Ô∏è

### ‚úÖ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û:

1. **–î–æ–±–∞–≤–∏—Ç—å .env –≤ .gitignore**
   ```
   .env
   .env.local
   .env.production
   ```

2. **–ù–ò–ö–û–ì–î–ê –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—å .env –≤ git!**
   ```bash
   git status  # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ .env –Ω–µ –≤ —Å–ø–∏—Å–∫–µ
   ```

3. **–ù–µ –¥–µ–ª–∏—Ç—å—Å—è —Ç–æ–∫–µ–Ω–∞–º–∏**
   - –ù–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –≤ —á–∞—Ç—ã
   - –ù–µ –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤ issues
   - –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞—Ö

### üîÑ –ï—Å–ª–∏ —Ç–æ–∫–µ–Ω —É—Ç—ë–∫:

**Telegram:**
1. @BotFather ‚Üí `/token`
2. –í—ã–±—Ä–∞—Ç—å –±–æ—Ç–∞
3. `/revoke` - –æ—Ç–æ–∑–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–π —Ç–æ–∫–µ–Ω
4. –ü–æ–ª—É—á–∏—Ç—å –Ω–æ–≤—ã–π

**OpenAI:**
1. https://platform.openai.com/api-keys
2. –ù–∞–π—Ç–∏ —É—Ç–µ–∫—à–∏–π –∫–ª—é—á
3. –ù–∞–∂–∞—Ç—å **Revoke**
4. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π

---

## 7Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å .env:

```bash
# Windows
type .env

# Linux/Mac
cat .env
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ç–æ–∫–µ–Ω—ã —Ä–∞–±–æ—Ç–∞—é—Ç:

```python
# test_keys.py
import os
from dotenv import load_dotenv

load_dotenv()

# Check Telegram
telegram_token = os.getenv("TELEGRAM_BOT_TOKEN")
print(f"‚úÖ Telegram: {'OK' if telegram_token else '‚ùå NOT SET'}")

# Check OpenAI
openai_key = os.getenv("OPENAI_API_KEY")
print(f"‚úÖ OpenAI: {'OK' if openai_key and openai_key.startswith('sk-') else '‚ùå NOT SET'}")

# Check Database
db_url = os.getenv("DATABASE_URL")
print(f"‚úÖ Database: {'OK' if db_url else '‚ùå NOT SET'}")
```

–ó–∞–ø—É—Å—Ç–∏—Ç—å:
```bash
python test_keys.py
```

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```
‚úÖ Telegram: OK
‚úÖ OpenAI: OK
‚úÖ Database: OK
```

---

## 8Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

```bash
make run-debug
```

### –ù–∞–π—Ç–∏ –±–æ—Ç–∞ –≤ Telegram:

1. –û—Ç–∫—Ä—ã—Ç—å Telegram
2. –ù–∞–π—Ç–∏: `@–≤–∞—à_username_–±–æ—Ç–∞`
3. –ù–∞–∂–∞—Ç—å **Start**
4. –û—Ç–ø—Ä–∞–≤–∏—Ç—å `/start`

–î–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ–º! ‚úÖ

---

## 9Ô∏è‚É£ –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### ‚ùå "Invalid token"
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª–∏ –≤–µ—Å—å —Ç–æ–∫–µ–Ω
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤
- –§–æ—Ä–º–∞—Ç: `1234567890:ABCdef...`

### ‚ùå "Incorrect API key provided"
- –ö–ª—é—á –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `sk-`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫–ª—é—á –Ω–µ –∏—Å—Ç—ë–∫
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫–∞—Ä—Ç–∞ –ø—Ä–∏–≤—è–∑–∞–Ω–∞

### ‚ùå "Database connection failed"
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DATABASE_URL
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –±–∞–∑–∞ —Å–æ–∑–¥–∞–Ω–∞

---

## üéØ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—Å–µ—Ö –∫–ª—é—á–µ–π:

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å .env
cat .env

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –µ—â—ë –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã)
pip install -r requirements.txt

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL
docker-compose up -d postgres

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
make run-debug

# 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ Telegram!
```

---

## üìû –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:

- **Telegram Bot API**: https://core.telegram.org/bots
- **@BotFather**: https://t.me/BotFather
- **OpenAI Platform**: https://platform.openai.com/
- **OpenAI API Keys**: https://platform.openai.com/api-keys
- **OpenAI Usage**: https://platform.openai.com/usage
- **OpenAI Pricing**: https://openai.com/api/pricing/

---

**–ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –≤—Å–µ –∫–ª—é—á–∏ –¥–ª—è –∑–∞–ø—É—Å–∫–∞!** üöÄ

